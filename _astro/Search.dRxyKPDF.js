import{o as Se,i as Pe,s as A,r as fe}from"./props.CFp1PoRn.js";import{q as pe,v as Te,f as k,a as U,t as S,g as e,e as G,b as g,p as Le,c as Re,s as x,m as V,d as b,u as i,h as l,i as s,r as o,j as ie}from"./utils.BUOTzkNE.js";import{s as B}from"./render.DrVGAan2.js";import{i as L}from"./if.D48hGaIU.js";import{e as ze,i as Ee}from"./each.YV9WMojM.js";import{I as N,h as ne}from"./Icon.C6e8Bd3Z.js";import{b as me}from"./input.CRUyF9GO.js";import{I as c}from"./zh_TW.CS_0h0kZ.js";import{i as d}from"./translation.CTxHTgvr.js";import{u as he}from"./url-utils.CII_ds1F.js";/* empty css                        */import"./branches.0nLXAaZu.js";import"./navBarConfig.Cdwy0Ety.js";function Be(v,j){if(!v||typeof v!="string"){console.warn("navigateToPage: Invalid URL provided");return}if(v.startsWith("http://")||v.startsWith("https://")||v.startsWith("//")){window.open(v,"_blank");return}if(v.startsWith("#")){const r=document.getElementById(v.slice(1));r&&r.scrollIntoView({behavior:"smooth"});return}if(typeof window<"u"&&window.swup)try{j?.replace||window.swup.navigate(v)}catch(r){console.error("Swup navigation failed:",r),ue(v)}else ue(v)}function ue(v,j){window.location.href=v}var We=k('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Ce=k('<div class="transition text-sm text-50" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-hover); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; flex-shrink: 0;"> </span> <div><!></div></div>'),qe=k('<div class="transition text-sm text-30" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-active); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; flex-shrink: 0;"> </span> <div><!></div></div>'),Me=k(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
           rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"><!> <!></div> <!> <!></a>`),Ue=k('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] text-[var(--primary)] font-bold text-center"><span class="inline-flex items-center"> <!></span></a>'),Ve=k("<!> <!>",1),Ne=k('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),je=k('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Fe=k(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1n2o1uz"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <!></div>`,1);function at(v,j){Re(j,!1);let r=V(""),f=V(""),p=V([]),H=V(!1),R=V(!1),se;const Ke=[{url:he("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because Pagefind cannot work in the <mark>dev</mark> environment."},{url:he("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],ge=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},J=(a,n)=>{const m=document.getElementById("search-panel");!m||n&&!e(r)||!n&&!e(f)||(a?m.classList.remove("float-panel-closed"):m.classList.add("float-panel-closed"))},be=()=>{document.getElementById("search-panel")?.classList.add("float-panel-closed"),x(r,""),x(f,""),x(p,[])},oe=(a,n)=>{a.preventDefault(),be(),Be(n)},W=async(a,n)=>{if(!a){J(!1,n),x(p,[]);return}e(R)&&(x(H,!0),clearTimeout(se),se=setTimeout(async()=>{try{let m=[];if(window.pagefind){const C=await window.pagefind.search(a);m=await Promise.all(C.results.map(Z=>Z.data()))}x(p,m),J(!0,n)}catch(m){console.error("Search error:",m),x(p,[]),J(!1,n)}finally{x(H,!1)}},300))};Se(()=>{const a=()=>{x(R,!0),e(r)&&W(e(r),!0),e(f)&&W(e(f),!1)};window.pagefind?a():(document.addEventListener("pagefindready",a,{once:!0}),document.addEventListener("pagefindloaderror",a,{once:!0}))}),pe(()=>(e(R),e(r)),()=>{e(R)&&(e(r)||e(r)==="")&&W(e(r),!0)}),pe(()=>(e(R),e(f)),()=>{e(R)&&(e(f)||e(f)==="")&&W(e(f),!1)}),Te(),Pe();var le=Fe(),O=U(le),ce=s(O);N(ce,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var F=b(ce,2);fe(F),o(O);var K=b(O,2),xe=s(K);N(xe,{icon:"material-symbols:search",class:"text-[1.25rem]"}),o(K);var de=b(K,2),Q=s(de),ve=s(Q);N(ve,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var X=b(ve,2);fe(X),o(Q);var _e=b(Q,2);{var ye=a=>{var n=We(),m=s(n,!0);o(n),S(C=>B(m,C),[()=>(l(d),l(c),i(()=>d(c.searchLoading)))]),g(a,n)},we=a=>{var n=ie(),m=U(n);{var C=z=>{var q=Ve(),Y=U(q);ze(Y,1,()=>(e(p),i(()=>e(p).slice(0,5))),Ee,(h,t)=>{var u=Me(),_=s(u),I=s(_);ne(I,()=>(e(t),i(()=>e(t).meta.title)));var y=b(I,2);N(y,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),o(_);var E=b(_,2);{var ee=w=>{var P=Ce(),T=s(P),te=s(T,!0);o(T);var M=b(T,2),ae=s(M);ne(ae,()=>(e(t),i(()=>e(t).excerpt))),o(M),o(P),S(re=>B(te,re),[()=>(l(d),l(c),i(()=>d(c.searchSummary)))]),g(w,P)};L(E,w=>{e(t),i(()=>e(t).excerpt.includes("<mark>"))&&w(ee)})}var ke=b(E,2);{var Ie=w=>{var P=qe(),T=s(P),te=s(T,!0);o(T);var M=b(T,2),ae=s(M);ne(ae,()=>(e(t),i(()=>e(t).content))),o(M),o(P),S(re=>B(te,re),[()=>(l(d),l(c),i(()=>d(c.searchContent)))]),g(w,P)};L(ke,w=>{e(t),i(()=>e(t).content&&e(t).content.includes("<mark>"))&&w(Ie)})}o(u),S(()=>A(u,"href",(e(t),i(()=>e(t).url)))),G("click",u,w=>oe(w,e(t).url)),g(h,u)});var D=b(Y,2);{var $=h=>{var t=Ue(),u=s(t),_=s(u),I=b(_);N(I,{icon:"fa6-solid:arrow-right",class:"transition text-[0.75rem] ml-1"}),o(u),o(t),S((y,E)=>{A(t,"href",`/search/?q=${y??""}`),B(_,`${E??""} `)},[()=>(e(r),e(f),i(()=>encodeURIComponent(e(r)||e(f)))),()=>(l(d),l(c),e(p),i(()=>d(c.searchViewMore).replace("{count}",(e(p).length-5).toString())))]),G("click",t,y=>oe(y,`/search/?q=${encodeURIComponent(e(r)||e(f))}`)),g(h,t)};L(D,h=>{e(p),i(()=>e(p).length>5)&&h($)})}g(z,q)},Z=z=>{var q=ie(),Y=U(q);{var D=h=>{var t=Ne(),u=s(t,!0);o(t),S(_=>B(u,_),[()=>(l(d),l(c),i(()=>d(c.searchNoResults)))]),g(h,t)},$=h=>{var t=ie(),u=U(t);{var _=I=>{var y=je(),E=s(y,!0);o(y),S(ee=>B(E,ee),[()=>(l(d),l(c),i(()=>d(c.searchTypeSomething)))]),g(I,y)};L(u,I=>{(e(r)||e(f))&&I(_)},!0)}g(h,t)};L(Y,h=>{e(p),i(()=>e(p).length===0)?h(D):h($,!1)},!0)}g(z,q)};L(m,z=>{e(p),i(()=>e(p).length>0)?z(C):z(Z,!1)},!0)}g(a,n)};L(_e,a=>{e(H)?a(ye):a(we,!1)})}o(de),S((a,n)=>{A(F,"placeholder",a),A(X,"placeholder",n)},[()=>(l(d),l(c),i(()=>d(c.search))),()=>(l(d),l(c),i(()=>d(c.search)))]),me(F,()=>e(r),a=>x(r,a)),G("focus",F,()=>W(e(r),!0)),G("click",K,ge),me(X,()=>e(f),a=>x(f,a)),g(v,le),Le()}export{at as default};
